<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Useful BASH shortcuts for conda - mike.depalatis.net</title>
<link rel="stylesheet" href="/css/inter.css">
<link rel="stylesheet" href="/css/new.css">
<link rel="stylesheet" href="/css/codehilite.css">
</head>
<body>
<header>
<h1>mike.depalatis.net</h1>
<nav>
<a href="/index.html">Home</a>
/
<a href="/blog/index.html">Articles</a>
/
<a href="/resources.html">Resources</a>
</nav>
</header>


<h1>Useful BASH shortcuts for conda</h1>
<p>Anaconda's <a href="https://conda.io/docs/">conda</a> has become the de facto environment
management tool in Python-oriented scientific computing. Its lightweight
environments are suitable for development and, at least in some cases,
deployment. In general, for each new project, I like to create a new
environment. Creating a new, mostly empty environment is done with the following
command:</p>
<div class="codehilite"><pre><span></span><code>$ conda env create -y -n my-project-name
</code></pre></div>

<p>Then the new environment must be activated with</p>
<div class="codehilite"><pre><span></span><code>$ conda activate my-project-name
</code></pre></div>

<p>If I later want to remove the environment:</p>
<div class="codehilite"><pre><span></span><code>$ conda env remove -y -n my-project-name
</code></pre></div>

<p>This can get tiresome, so I have the following functions defined in my
<code>.bashrc</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">function</span> conact<span class="o">()</span> <span class="o">{</span>
    conda activate <span class="k">$(</span>basename <span class="k">$(</span><span class="nb">pwd</span><span class="k">))</span>
<span class="o">}</span>

<span class="k">function</span> cenv<span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">[</span> -f environment.yaml <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    conda env create --file<span class="o">=</span>environment.yaml -n <span class="k">$(</span>basename <span class="k">$(</span><span class="nb">pwd</span><span class="k">))</span>
    <span class="k">else</span>
    conda create -yn <span class="k">$(</span>basename <span class="k">$(</span><span class="nb">pwd</span><span class="k">))</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function</span> rmcenv<span class="o">()</span> <span class="o">{</span>
    conda remove -n <span class="k">$(</span>basename <span class="k">$(</span><span class="nb">pwd</span><span class="k">))</span> --all
<span class="o">}</span>
</code></pre></div>

<p>Now when starting a new project, I need only type</p>
<div class="codehilite"><pre><span></span><code>$ cenv
$ conact
</code></pre></div>

</body>
</html>
